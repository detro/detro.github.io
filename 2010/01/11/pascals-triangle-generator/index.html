<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link type="application/atom+xml" rel="alternate" href="http://ivandemarino.me/atom.xml" title="Too much coffee, too little time" />

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <!-- Third Party CSS -->
        <link href="/css/thirdparty/purecss-combo.min.css" rel="stylesheet">
        <link href="/css/thirdparty/font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <!--[if IE 7]>
            <link href="/css/thirdparty/font-awesome/css/font-awesome-ie7.min.css" rel="stylesheet" >
        <![endif]-->

        <!-- Theme CSS -->
        <link rel="stylesheet" href="/css/leo.css">

        <!-- Utility JS -->
        <script type="text/javascript" src="/js/normalize.js"></script>

        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-136869-11"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'UA-136869-11');
            </script>
        

        
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-K0JQTBH0J9"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'G-K0JQTBH0J9');
            </script>
        

        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Pascal’s Triangle generator | Too much coffee, too little time</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Pascal’s Triangle generator" />
<meta name="author" content="detro" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="What’s Pascal’s Triangle? That’s what it is (Wikipedia has all the theory, if you need). Pascal&#39;s Triangle first 6 rows The thing I wrote here is a generator of the n-th row of the triangle, that doesn’t use more then the memory needed to store the solution. Instead of allocating a Triangular Matrix, and building every row based on the one above, solution is built in place. How does it work The result is generated “filling the row from right to left”. I start initiating the element on the right hand side to &#39;1&#39;. Then, I run something like:" />
<meta property="og:description" content="What’s Pascal’s Triangle? That’s what it is (Wikipedia has all the theory, if you need). Pascal&#39;s Triangle first 6 rows The thing I wrote here is a generator of the n-th row of the triangle, that doesn’t use more then the memory needed to store the solution. Instead of allocating a Triangular Matrix, and building every row based on the one above, solution is built in place. How does it work The result is generated “filling the row from right to left”. I start initiating the element on the right hand side to &#39;1&#39;. Then, I run something like:" />
<link rel="canonical" href="http://ivandemarino.me/2010/01/11/pascals-triangle-generator/" />
<meta property="og:url" content="http://ivandemarino.me/2010/01/11/pascals-triangle-generator/" />
<meta property="og:site_name" content="Too much coffee, too little time" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2010-01-11T01:31:09+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Pascal’s Triangle generator" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"detro"},"dateModified":"2010-01-11T01:31:09+00:00","datePublished":"2010-01-11T01:31:09+00:00","description":"What’s Pascal’s Triangle? That’s what it is (Wikipedia has all the theory, if you need). Pascal&#39;s Triangle first 6 rows The thing I wrote here is a generator of the n-th row of the triangle, that doesn’t use more then the memory needed to store the solution. Instead of allocating a Triangular Matrix, and building every row based on the one above, solution is built in place. How does it work The result is generated “filling the row from right to left”. I start initiating the element on the right hand side to &#39;1&#39;. Then, I run something like:","headline":"Pascal’s Triangle generator","mainEntityOfPage":{"@type":"WebPage","@id":"http://ivandemarino.me/2010/01/11/pascals-triangle-generator/"},"url":"http://ivandemarino.me/2010/01/11/pascals-triangle-generator/"}</script>
<!-- End Jekyll SEO tag -->

    </head>

    <body>
        <div id="layout" class="pure-g-r">

            <div id="sidebar" class="pure-u">
                <a id="toggle-navigation" href="#"><i class="icon-reorder"></i></a>

                <header id="header">

                    <hgroup>
                        <h1><a href="http://ivandemarino.me/">Too much <strong>coffee</strong><br/>too little <strong>time</strong></a></h1>
                        <h2>Ivan <strong>De Marino</strong></h2>
                    </hgroup>

                    <nav id="navigation">
                        
                            <ul id="internal-links">
                                
                                    <li class=""><a href="http://ivandemarino.me/">blog</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/projects">projects</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/about-me">about me</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/archive">archive</a></li>
                                
                            </ul>
                        

                        
                            <ul id="rel-me-links">
                                
                                    <li><a rel="me" href="https://twitter.com/detronizator" target="_blank"><i class="icon-twitter"></i></a></li>
                                
                                    <li><a rel="me" href="https://github.com/detro" target="_blank"><i class="icon-github"></i></a></li>
                                
                                    <li><a rel="me" href="http://linkedin.com/in/ivandemarino" target="_blank"><i class="icon-linkedin"></i></a></li>
                                
                                    <li><a rel="me" href="http://ivandemarino.me/atom.xml" target="_blank"><i class="icon-rss"></i></a></li>
                                
                                    <li><a rel="me" href="http://ivandemarino.me/sitemap.xml" target="_blank"><i class="icon-sitemap"></i></a></li>
                                
                            </ul>
                        
                    </nav>

                </header>
            </div>

            <div id="main" class="pure-u-1">

                <div id="content">
                    
<article class="entry full pure-u-1">
    <header>
        <h1 class="title">
            
                Pascal's Triangle generator
            
        </h1>
        
            <ul class="meta">
                
                    <li>
                        <i class="icon-calendar"></i>
                        <time datetime="2010-01-11">Monday, 11 Jan 2010</time>
                    </li>
                

                
                    <li>
                        <i class="icon-tags"></i>
                        code &bull; triangle &bull; generator &bull; personal &bull; english &bull; it &bull; pascal &bull; optimization &bull; memory &bull; cool
                    </li>
                

                
                    <li>
                        <i class="icon-time"></i>
                        417 words
                    </li>
                
            </ul>
        
    </header>
    
        <div class="body">
            
                <p>What’s <a href="http://en.wikipedia.org/wiki/Pascal's_triangle">Pascal’s Triangle</a>? That’s what it is (<a href="http://en.wikipedia.org/wiki/Pascal's_triangle">Wikipedia</a> has all the theory, if you need).</p>

<div class="img">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Pascal%27s_triangle_5.svg/250px-Pascal%27s_triangle_5.svg.png" alt="Pascal's Triangle first 6 rows" />
Pascal's Triangle first 6 rows
</div>

<p>The thing I wrote here is a generator of the <em>n-th row</em> of the triangle, that doesn’t use more then the memory needed to store the solution. Instead of allocating a <em>Triangular Matrix</em>, and building every row based on the one above, solution is <em>built in place</em>.</p>

<h2 id="how-does-it-work">How does it work</h2>
<p>The result is generated <em>“filling the row from right to left”</em>. I start initiating the element on the right hand side to <code>'1'</code>. Then, I run something like:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">init</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">..</span> <span class="n">requested_row</span><span class="p">]</span>

<span class="n">result</span><span class="p">[</span><span class="n">requested_row</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">requested_row</span> <span class="k">do</span><span class="o">:</span>
   <span class="k">for</span> <span class="n">j</span> <span class="o">=</span> <span class="n">requested_row</span><span class="o">-</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">requested_row</span><span class="o">-</span><span class="mi">1</span> <span class="k">do</span><span class="o">:</span>
      <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
   <span class="n">endfor</span>
<span class="n">endfor</span>
</code></pre></div></div>

<p>Clearly this is nothing special. Just a little trick to avoid to use a triangular matrix. <a href="http://www.google.co.uk/products?hl=en&amp;safe=off&amp;q=memory%20prices&amp;lr=&amp;um=1&amp;ie=UTF-8&amp;sa=N&amp;tab=wf">Memory is not cheap</a>, you know! ;-)</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">print_row</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">*</span> <span class="n">row</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span> <span class="p">)</span> <span class="p">{</span> <span class="n">printf</span><span class="p">(</span><span class="s">"%llu "</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span> <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">*</span> <span class="nf">pascal_triangle_line</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pascal_row</span><span class="p">){</span>
    <span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">pascal_row</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">));</span>
    
    <span class="k">if</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">result</span> <span class="p">)</span> <span class="p">{</span>    
        <span class="n">result</span><span class="p">[</span><span class="n">pascal_row</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// First element on the right is always '1'</span>
        <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">pascal_row</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="p">{</span>
            
            <span class="cp">#ifdef DEBUG
</span>            <span class="n">print_row</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">pascal_row</span><span class="p">);</span>
            <span class="cp">#endif
</span>            
            <span class="k">for</span> <span class="p">(</span> <span class="n">j</span> <span class="o">=</span> <span class="n">pascal_row</span><span class="o">-</span><span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">pascal_row</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span> <span class="p">)</span> <span class="p">{</span>
                <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// Calculate the 'j'-th element</span>
                
                <span class="cp">#ifdef VERBOSE
</span>                <span class="n">printf</span><span class="p">(</span><span class="s">"(row: %d, element: %d) =&gt; %llu</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
                <span class="cp">#endif
</span>            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
        
    <span class="k">return</span> <span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
       
    <span class="c1">// Check the Input</span>
	<span class="k">if</span> <span class="p">(</span> <span class="n">argc</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">)</span> <span class="n">input</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="k">else</span> <span class="k">return</span> <span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    
    <span class="c1">// Calculate the required line</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pascal_triangle_line</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
    
    <span class="c1">// Print result</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">result</span> <span class="p">)</span> <span class="p">{</span> 
        <span class="n">printf</span><span class="p">(</span><span class="s">"RESULT ROW:</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">print_row</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">input</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Complexity in time: O(n<sup>2</sup>/2). After all, the complexity is a constant operation O(1), multiplied by the number of elements in the Triangular Matrix: n<sup>2</sup> elements divided by 2. BUT bear in mind that O(n<sup>2</sup>/2) = O(n<sup>2</sup>). So, <strong>it’s more correct to say that the complexity is quadratic</strong>.</p>

<p>Of course, if instead you need the whole triangle (not just an arbitrary row) you will have to store it somewhere, so this solution wouldn’t work for you as it is.</p>

            
        </div>
    
</article>


                </div>

                <footer id="footer">
                    
                        <span>Hosted on <a href="http://pages.github.com/" target="_blank">GitHub Pages</a></span>
                    
                    
                        <span>Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></span>
                    
                    
                    
                        <span>Licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></span>
                    
                </footer>

            </div>
        </div>

        <script>
            // Registering "click" handler for "#toggle-navigation"
            normalize.elementAddEventListener(document.getElementById("toggle-navigation"),
                "click",
                function(e) {
                    var navEl = document.getElementById("navigation");
                    navEl.classList.toggle("open");
                    e.preventDefault();
                });
        </script>
    </body>
</html>
