<!DOCTYPE html>
<html>
    <head>
        <title>Finally, GhostDriver 1.0.0 - Too much coffee, too little time</title>

        <meta name="author" content="Ivan De Marino">
        <meta name="generator" content="Jekyll"
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link type="application/atom+xml" rel="alternate" href="http://ivandemarino.me/atom.xml" title="Too much coffee, too little time" />

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <!-- Third Party CSS -->
        <!-- original: href="http://yui.yahooapis.com/combo?pure/0.3.0/base-min.css&pure/0.3.0/grids-min.css&pure/0.3.0/forms-min.css&pure/0.3.0/buttons-min.css&pure/0.3.0/menus-min.css" -->
        <link href="/css/thirdparty/purecss-combo.min.css" rel="stylesheet">
        <!-- original: href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" -->
        <link href="/css/thirdparty/font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <!-- original: href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome-ie7.min.css" -->
        <!--[if IE 7]>
            <link href="/css/thirdparty/font-awesome/css/font-awesome-ie7.min.css" rel="stylesheet" >
        <![endif]-->

        <!-- Theme CSS -->
        <link rel="stylesheet" href="/css/leo.css">

        <!-- Utility JS -->
        <script type="text/javascript" src="/js/normalize.js"></script>

        
            <!-- google universal analytics -->
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-136869-11', 'ivandemarino.me');
                ga('send', 'pageview');
            </script>
        
    </head>

    <body>
        <div id="layout" class="pure-g-r">

            <div id="sidebar" class="pure-u">
                <a id="toggle-navigation" href="#"><i class="icon-reorder"></i></a>

                <header id="header">

                    <hgroup>
                        <h1><a href="http://ivandemarino.me/">Too much <strong>coffee</strong><br/>too little <strong>time</strong></a></h1>
                        <h2>Ivan <strong>De Marino</strong></h2>
                    </hgroup>

                    <nav id="navigation">
                        
                            <ul id="internal-links">
                                
                                    <li class=""><a href="http://ivandemarino.me/">blog</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/projects">projects</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/about-me">about me</a></li>
                                
                                    <li class=""><a href="http://ivandemarino.me/archive">archive</a></li>
                                
                            </ul>
                        

                        
                            <ul id="rel-me-links">
                                
                                    <li><a rel="me" href="https://twitter.com/detronizator" target="_blank"><i class="icon-twitter"></i></a></li>
                                
                                    <li><a rel="me" href="https://github.com/detro" target="_blank"><i class="icon-github"></i></a></li>
                                
                                    <li><a rel="me" href="http://linkedin.com/in/ivandemarino" target="_blank"><i class="icon-linkedin"></i></a></li>
                                
                                    <li><a rel="me" href="http://ivandemarino.me/atom.xml" target="_blank"><i class="icon-rss"></i></a></li>
                                
                            </ul>
                        
                    </nav>

                </header>
            </div>

            <div id="main" class="pure-u-1">

                <div id="content">
                    
<article class="entry full pure-u-1">
    <header>
        <h1 class="title">
            
                Finally, GhostDriver 1.0.0
            
        </h1>
        
            <ul class="meta">
                
                    <li>
                        <i class="icon-calendar"></i>
                        <time datetime="2012-12-03">Monday, 03 Dec 2012</time>
                    </li>
                

                
                    <li>
                        <i class="icon-tags"></i>
                        webdriver &bull; wire &bull; protocol &bull; features &bull; phantomjs &bull; python &bull; selenium &bull; .net &bull; binding &bull; next &bull; future &bull; opensource &bull; release &bull; java &bull; lesson &bull; roadmap &bull; ghostdriver
                    </li>
                

                
                    <li>
                        <i class="icon-time"></i>
                        1494 words
                    </li>
                
            </ul>
        
    </header>
    
        <div class="body">
            
                <p>After ~10 months of work, I finally managed to push the ball forward enough to reach <strong>GhostDriver 1.0.0</strong>.
I won’t lie: it does feel great. It always is to see so much effort mutate into an <em>achievement</em>,
even it is such only for me.</p>

<p>Before I go any further though, I owe a massive <strong>THANK-YOU</strong> to the people that through contribution
and / or issue reporting have helped me to build a <em>releasable</em> 1.0.0. In particular to
<a href="http://jimevansmusic.blogspot.co.uk/">Jim Evans</a>, an awesome guy and a bit of a
mentor for me: you ROCK Jim, and I think that is true, <em>literally!</em></p>

<div class="img">
<img src="http://fc02.deviantart.net/fs71/i/2011/149/0/e/ghost_driver_by_swanee3-d3hkmjo.jpg" alt="Ghost Driver" width="600" />
</div>

<h2 id="explaining-100">Explaining <code class="language-plaintext highlighter-rouge">1.0.0</code></h2>

<p>In 1.0.0 I wanted to have the right amount of <a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol">Wire Protocol</a>
implemented, but still be able to deliver something stable before <strong>Christmas 2012</strong>!</p>

<p>So, what’s in GhostDriver 1.0.0 (<a href="https://github.com/detro/ghostdriver/blob/master/CHANGELOG.md">changelog</a>)?</p>

<ol>
  <li>Navigation</li>
  <li>Page content extraction</li>
  <li>Arbitrary JS execution</li>
  <li>Window handling</li>
  <li>Frame handling</li>
  <li>Screen-shot generation</li>
  <li>Cookies</li>
  <li>Element Search, Localization &amp; Manipulation</li>
  <li>Mouse interaction (even though <code class="language-plaintext highlighter-rouge">doubeClick</code> and <code class="language-plaintext highlighter-rouge">rightClick</code> seems to be a bit flaky)</li>
  <li>Keyboard interaction</li>
</ol>

<p>It’s not the entire protocol yet, but it feels like a good start: I do think you can cover a lot of ground in your
tests with those already.</p>

<p>To monitor progress, and to know in details what’s there and what’s not, check
<a href="https://docs.google.com/spreadsheet/ccc?key=0Am63grtxc7bDdGNqX1ZPX2VoZlE2ZHZhd09lNDkzbkE#gid=0">this spreadsheet out</a>.</p>

<h3 id="you-said-explaining">You said “explaining”…</h3>

<p>OK. So, GhostDriver is developed as a plain PhantomJS script that makes use of basically 2 PhantomJS built-in
modules:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">require("webserver")</code>: to receive the Wire Protocol REST commands HTTP Requests</li>
  <li><code class="language-plaintext highlighter-rouge">require("webpage")</code>: to execute those commands into Browser Windows (i.e. 1 <code class="language-plaintext highlighter-rouge">webpage</code> corresponds to 1 <code class="language-plaintext highlighter-rouge">window</code>)</li>
</ul>

<p>You can download the source code from the repository
(see <a href="https://github.com/detro/ghostdriver/blob/master/README.md">README.md</a>), and launch it with the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>phantomjs ghostdriver/src/main.js <span class="o">[</span>LOCAL_IP:]PORT
</code></pre></div></div>

<p>This approach was and is <strong>for development only</strong> though: GhostDriver target, since the beginning,
was to embed the driver into PhantomJS - a feature demanded
<a href="http://code.google.com/p/phantomjs/issues/detail?id=49">since February 2011</a>(!!!).</p>

<p>So, from next release of PhantomJS (<strong>1.8</strong> should come just before Christmas) you will be able to do instead:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>phantomjs <span class="nt">--webdriver</span><span class="o">=[</span>LOCAL_IP:]PORT
</code></pre></div></div>

<p>without the need to download anything but your favourite <em>single-binary-headless-browser</em>.
If you are impatient though, just download latest PhantomJS <code class="language-plaintext highlighter-rouge">master</code> branch, compile with <code class="language-plaintext highlighter-rouge">./build.sh</code> and enjoy.</p>

<h3 id="binding">Binding</h3>

<p>To make it easier to get started, <a href="https://github.com/lukeis">Luke Inman</a>-<a href="https://twitter.com/tunabum">Semerau</a>,
Jim Evans and I have provided binding classes that
will make even easier to get up and running with PhantomJS/GhostDriver in your Selenium/WebDriver tests.
<a href="https://code.google.com/p/selenium/source/browse/#svn%2Ftrunk%2Fpy%2Fselenium%2Fwebdriver%2Fphantomjs">Luke is providing Python binding</a>,
<a href="https://code.google.com/p/selenium/source/browse/#svn%2Ftrunk%2Fdotnet%2Fsrc%2FWebDriver%2FPhantomJS">Jim covers C#/.Net</a>
and <a href="https://github.com/detro/ghostdriver/tree/master/binding/java/jars">I wrote the Java</a> ones.</p>

<p>The next Selenium version is <code class="language-plaintext highlighter-rouge">2.27.0</code>, and it’s going to contain those bindings (hurray!). As I write this,
<a href="http://www.theautomatedtester.co.uk/">David Burns</a> is
<a href="https://groups.google.com/forum/?fromgroups=#!topic/selenium-developers/0wFXuEHU2hs">taking matters into his hands</a>
to prepare the release.</p>

<p>But I’m sure you want to see some code. Here is a Java snippet:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.openqa.selenium.phantomjs.PhantomJSDriver</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestPhantomJSDriver</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">argv</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// prepare capabilities</span>
        <span class="nc">Capabilities</span> <span class="n">caps</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DesiredCapabilities</span><span class="o">();</span>
        <span class="n">caps</span><span class="o">.</span><span class="na">setJavascriptEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>                <span class="c1">//&lt; not really needed: JS enabled by default</span>
        <span class="n">caps</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="s">"takesScreenshot"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>    <span class="c1">//&lt; yeah, GhostDriver haz screenshotz!</span>
        <span class="n">caps</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span>
            <span class="nc">PhantomJSDriverService</span><span class="o">.</span><span class="na">PHANTOMJS_EXECUTABLE_PATH_PROPERTY</span><span class="o">,</span>
            <span class="s">"/path/to/your/phantomjs/binary/greater/than/1.7"</span>
        <span class="o">);</span>

        <span class="c1">// Launch driver (will take care and ownership of the phantomjs process)</span>
        <span class="nc">WebDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PhantomJSDriver</span><span class="o">(</span><span class="n">caps</span><span class="o">);</span>

        <span class="c1">// Load Google.com</span>
        <span class="n">driver</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"http://www.google.com"</span><span class="o">);</span>
        <span class="c1">// Locate the Search field on the Google page</span>
        <span class="nc">WebElement</span> <span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="nc">By</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"q"</span><span class="o">));</span>
        <span class="c1">// Type Cheese</span>
        <span class="nc">String</span> <span class="n">strToSearchFor</span> <span class="o">=</span> <span class="s">"Cheese!"</span><span class="o">;</span>
        <span class="n">element</span><span class="o">.</span><span class="na">sendKeys</span><span class="o">(</span><span class="n">strToSearchFor</span><span class="o">);</span>
        <span class="c1">// Submit form</span>
        <span class="n">element</span><span class="o">.</span><span class="na">submit</span><span class="o">();</span>

        <span class="c1">// Check results contains the term we searched for</span>
        <span class="n">assertTrue</span><span class="o">(</span><span class="n">driver</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">strToSearchFor</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">()));</span>

        <span class="c1">// done</span>
        <span class="n">driver</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>It’s also important to highlight that <strong>GhostDriver implements the standard WebDriver WireProtocol</strong>.
This means that you can connect to a running instance of PhantomJS in WebDriver mode by simply using any
<code class="language-plaintext highlighter-rouge">RemoteWebDriver</code> class available in your favourite language. No strict need to use those bindings.</p>

<h2 id="where-do-i-get-it">Where do I get it?</h2>

<p>Because GhostDriver is now part of PhantomJS, you can get it in the next PhantomJS binary, stable release.
It should be <strong>PhantomJS 1.8</strong>, and should be out by the 21st of December (don’t tell <a href="http://ariya.ofilabs.com/">Ariya</a>
I told you that - it’s still cooking :-) ).</p>

<p>In the meantime, as briefly mentioned above, you have to do a bit of leg work: check out latest PhantomJS
<code class="language-plaintext highlighter-rouge">master</code> branch (from either <a href="https://github.com/ariya/phantomjs">Ariya’s (official upstream)</a> or
<a href="https://github.com/detro/phantomjs">my own (usually in sync with upstream)</a>),
and compile it (takes 30 minutes on average specs machine - much less if you have got <em>SSD</em>).</p>

<p>The nice thing is that to build this you apply the same “set-up” required to compile any PhantomJS: nothing special
is required. Just follow the instructions from <a href="http://phantomjs.org/build.html">here</a>
if you have never compiled it before.</p>

<h2 id="after-100-whats-next">After <code class="language-plaintext highlighter-rouge">1.0.0</code>: what’s next?</h2>

<p>There is a lot left to do. To push for 1.0.0 I had to make compromises, particularly in the number of Wire Protocol
commands I had to implement. Few key ones haven’t made it, but work on them it’s already started
(mostly in my head for now).</p>

<h3 id="101-bug-fixes"><code class="language-plaintext highlighter-rouge">1.0.1</code>: bug fixes</h3>

<p>I plan to have a <code class="language-plaintext highlighter-rouge">1.0.1</code> to address all the immediate issues. The work for this will be limited fixing bugs though.
I already got a couple of issues / comments reported and I’ll act on those.</p>

<p>So, don’t expect this release to be anything BUT bug-fixes: new stuff has to go in <em>“at the right time”</em> (see next).</p>

<p>A quick list of issues that will be address in this release:</p>

<ul>
  <li><a href="https://github.com/detro/ghostdriver/issues/123">Issue #123</a>:
Wait for potential “Page Load” when “Element.click()” is used</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/119">Issue #119</a>:
Command <code class="language-plaintext highlighter-rouge">/shutdown</code> arrives via <code class="language-plaintext highlighter-rouge">HTTP HEAD</code> in some language bindings (by <a href="https://github.com/jarib">Jari Bakken</a>)</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/124">Issue #124</a>:
Invalid response when checking element equality</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/126">Issue #126</a>:
Crash on <code class="language-plaintext highlighter-rouge">get</code> + <code class="language-plaintext highlighter-rouge">execute_async_script</code></li>
</ul>

<p>Track the work for <code class="language-plaintext highlighter-rouge">1.0.1</code> <a href="https://github.com/detro/ghostdriver/issues?labels=1.0.1&amp;page=1&amp;state=open">here</a>.</p>

<h3 id="110-new-features"><code class="language-plaintext highlighter-rouge">1.1.0</code>: new features</h3>

<p>This is <em>“the right time”</em> to add new features. This will be about pushing towards a full, complete WireProtocol
implementation. So far I have picked the following from the issue tracker:</p>

<ul>
  <li><a href="https://github.com/detro/ghostdriver/issues/108">Issue #108</a>: “Timeouts default value should be INFINITE”</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/120">Issue #120</a>:
Improve command line interface: support for just <code class="language-plaintext highlighter-rouge">--webdriver</code> without parameters</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/121">Issue #121</a>:
Better check for command line parameter: enforce <code class="language-plaintext highlighter-rouge">LOCAL_IP:PORT</code> or <code class="language-plaintext highlighter-rouge">localhost:PORT</code></li>
  <li><a href="https://github.com/detro/ghostdriver/issues/20">Issue #20</a>: Implement support for JavaScript Alert/Prompt/Confirm</li>
  <li><a href="https://github.com/detro/ghostdriver/issues/84">Issue #84</a>:
Rewrite the Request Routing code to be more like <a href="http://expressjs.com/">Node.js’s Express</a></li>
  <li><a href="https://github.com/detro/ghostdriver/issues/57">Issue #57</a>: Implement “Drag &amp; Drop” action builder</li>
</ul>

<p>Track the work for <code class="language-plaintext highlighter-rouge">1.1.0</code> <a href="https://github.com/detro/ghostdriver/issues?labels=1.1&amp;page=1">here</a>.</p>

<h3 id="1x-finishing-up"><code class="language-plaintext highlighter-rouge">1.x</code>: finishing up</h3>

<p>Well, this is quite simple. I can’t plan too much ahead, but the idea is to push toward 100% of the whole
WireProtocol. Maybe putting on top of that some Mobile User Agent simulation, but that requires some thinking first.</p>

<h2 id="anything-else">Anything else?</h2>

<p>Developing a WebDriver has been quite a journey so far, and it’s not yet finished.
If you listen to some of the Selenium devs, apparently will never actually end, as issues, feature requests,
criticism and pure simple <em>trolling</em> should keep flowing. At least that should happen if this is successful.</p>

<p>That might turn out to be tiring (or a failure), but I don’t hide that knowing this is something that
few people actually want to use makes me a tiny bit proud of my self.</p>

<h3 id="priorities">Priorities</h3>

<p>Before I go deep into another cycle of development though, my personal life is to regain some priority:
<strong>I’m getting married in April 2013</strong>. That, as you might expect, will take time and energy.
So, if you want to contribute to a small Open Source project that has some potential to be awesome, please join me and
the other few awesome souls that helped me so far. And this leads me to my last thoughts and conclusions…</p>

<h3 id="lesson-learned-still-learning-actually">Lesson learned (still learning actually!)</h3>

<p>As any small Open Source project, I need contributors. People that are willing to either write code, or kind enough
to report issues in a <strong>proper and reproducible</strong> manner.
One thing I had to learn is that, if I want to keep this project going, I need to be very strict in what I allow
myself to get involved into.</p>

<p>And, worst of all, while I got a bunch of guys really supportive of this work (I’m looking at you, Selenium-ers),
there is always the kind of jerk that prefers to spend time telling you why you are going
to fail, instead of trying to help you contributing improvements or fixes.</p>

<p>Those “encounters” taught me some very useful things:</p>

<ol>
  <li><em>Open Source it’s not Democracy</em>: You have to keep the ship sailing in the right direction</li>
  <li><em>Open Source it’s a “doers” culture</em>: ignore who talks and does nothing - embrace who makes things happen</li>
  <li><em>Lots of people ignore README files</em>: they just don’t read - but don’t get too upset by it</li>
  <li><em>Kill unhelpful issues</em>: they pollute the bug-tracker and lower morale, but reopen and discuss if the reporter “comes back to his senses”</li>
</ol>

<p>I have recently started to read <a href="http://www.amazon.co.uk/Team-Geek-Software-Developers-Working/dp/1449302440">Team Geek</a>, and it matches perfectly what I have experienced so far. Read it if you can!</p>

<h2 id="conclusions">Conclusions</h2>

<p>This post was long overdue, and it took me few days to finish it up. I’m sure I could add more details here, but it’s now the 4th night in a row and I want to move on.</p>

<p>What else can I say? <strong>Just that I hope this to be the first of other, even better releases!</strong></p>

<p>Happy Driving! :)</p>


            
        </div>
    
</article>


                </div>

                <footer id="footer">
                    
                        <span>Hosted on <a href="http://pages.github.com/">GitHub Pages</a></span>
                    
                    
                        <span>Powered by <a href="http://jekyllrb.com/">Jekyll</a></span>
                    
                    
                    
                        <span>Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
                    
                </footer>

            </div>
        </div>

        <script>
            // Registering "click" handler for "#toggle-navigation"
            normalize.elementAddEventListener(document.getElementById("toggle-navigation"),
                "click",
                function(e) {
                    var navEl = document.getElementById("navigation");
                    navEl.classList.toggle("open");
                    e.preventDefault();
                });
        </script>
    </body>
</html>
